<!DOCTYPE html>
<html lang="en" class="loading">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="Convex admin is super flexible, powerful, clean &amp; modern responsive bootstrap 4 admin template with unlimited possibilities.">
    <meta name="keywords" content="admin template, Convex admin template, dashboard template, flat admin template, responsive admin template, web app">
    <meta name="author" content="PIXINVENT">
    <title>FFunds 详细基金信息</title>
    <link rel="apple-touch-icon" sizes="60x60" href="app-assets/img/ico/apple-icon-60.png">
    <link rel="apple-touch-icon" sizes="76x76" href="app-assets/img/ico/apple-icon-76.png">
    <link rel="apple-touch-icon" sizes="120x120" href="app-assets/img/ico/apple-icon-120.png">
    <link rel="apple-touch-icon" sizes="152x152" href="app-assets/img/ico/apple-icon-152.png">
    <link rel="shortcut icon" href="app-assets/img/ico/favicon.jpg>
    <!-- <link rel="shortcut icon" href="app-assets/img/ico/favicon-32.jpg"> -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link href="https://fonts.googleapis.com/css?family=Rubik:300,400,500,700,900%7CMontserrat:300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="app-assets/fonts/feather/style.min.css">
    <link rel="stylesheet" type="text/css" href="app-assets/fonts/simple-line-icons/style.css">
    <link rel="stylesheet" type="text/css" href="app-assets/fonts/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/perfect-scrollbar.min.css">
    <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/prism.min.css">
    <link rel="stylesheet" type="text/css" href="app-assets/vendors/css/chartist.min.css">
    <link rel="stylesheet" type="text/css" href="app-assets/css/app.css">
    <script src="app-assets/js/echarts.js"></script>
  </head>
  <body data-col="2-columns" class=" 2-columns ">
    <!-- ////////////////////////////////////////////////////////////////////////////-->
    <div class="wrapper">

      <!-- 竖bar -->
      <div data-active-color="white" data-background-color="black" data-image="app-assets/img/sidebar-bg/01.jpg" class="app-sidebar">
        <div class="sidebar-header">
          <!-- 图标、标题 -->
          <div class="logo clearfix">
            <a href="funds-index.html" class="logo-text float-left">
              <div class="logo-img"><img src="app-assets/img/logo.png" alt="Convex Logo"/></div>
              <span class="text align-middle">FunFunds</span>
            </a>
            <!-- 放大与缩小 -->
            <a id="sidebarToggle" href="javascript:;" class="nav-toggle d-none d-sm-none d-md-none d-lg-block">
              <i data-toggle="expanded" class="ft-disc toggle-icon"></i>
            </a>
            <a id="sidebarClose" href="javascript:;" class="nav-close d-block d-md-block d-lg-none d-xl-none">
              <i class="ft-circle"></i>
            </a>
          </div>
        </div>
        <!-- 导航栏 -->
        <div class="sidebar-content">
          <div class="nav-container">
            <ul id="main-menu-navigation" data-menu="menu-navigation" class="navigation navigation-main">
              <li class="has-sub nav-item">
                <a href="#">
                  <i class="icon-home"></i>
                  <span data-i18n="" class="menu-title">按投资类别</span>
                </a>
                <ul class="menu-content">
                  <!-- <li><a href="funds-catalog.html?cid=1&sid=1" class="menu-item">债券型</a>
                  </li> -->
                  <li><a href="funds-catalog.html?cid=1&sid=2" class="menu-item">债券指数</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=1&sid=3" class="menu-item">股票型</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=1&sid=4" class="menu-item">QDII</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=1&sid=5" class="menu-item">混合FOF</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=1&sid=6" class="menu-item">混合型</a>
                  </li>
                </ul>
              </li>
              <li class="has-sub nav-item">
                <a href="#">
                  <i class="icon-screen-desktop"></i>
                  <span data-i18n="" class="menu-title">按风险程度</span>
                </a>
                <ul class="menu-content">
                  <li><a href="funds-catalog.html?cid=2&sid=1" class="menu-item">高风险</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=2&sid=2" class="menu-item">中高风险</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=2&sid=3" class="menu-item">中风险</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=2&sid=4" class="menu-item">中低风险</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=2&sid=5" class="menu-item">低风险</a>
                  </li>
                </ul>
              </li>
              <li class="has-sub nav-item">
                <a href="#">
                  <i class="icon-magnet"></i>
                  <span data-i18n="" class="menu-title">按基金管理人</span>
                </a>
                <ul class="menu-content">
                  <li><a href="funds-catalog.html?cid=3&sid=1" class="menu-item">博时基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=2" class="menu-item">广发基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=3" class="menu-item">中信保诚基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=4" class="menu-item">南方基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=5" class="menu-item">华夏基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=6" class="menu-item">工银瑞信基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=7" class="menu-item">招商基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=8" class="menu-item">万家基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=9" class="menu-item">嘉实基金</a>
                  </li>
                  <li><a href="funds-catalog.html?cid=3&sid=10" class="menu-item">易方达基金</a>
                  </li>
                </ul>
              </li>
              <li class=" nav-item">
                <a href="funds-comments.html">
                  <i class="icon-layers"></i>
                  <span data-i18n="" class="menu-title">意见与反馈</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
        <div class="sidebar-background"></div>
      </div>

      <!-- 横bar -->
      <nav class="navbar navbar-expand-lg navbar-light bg-faded">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" data-toggle="collapse" class="navbar-toggle d-lg-none float-left">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span></button>
              <span class="d-lg-none navbar-right navbar-collapse-toggle">
                <a class="open-navbar-container">
                  <i class="ft-more-vertical"></i></a></span>
                  <a id="navbar-fullscreen" href="javascript:;" class="mr-2 display-inline-block apptogglefullscreen">
              <p class="d-none">fullscreen</p></a><a class="ml-2 display-inline-block">
              <p class="d-none">cart</p></a>
          </div>
          <div class="navbar-container">
            <div id="navbarSupportedContent" class="collapse navbar-collapse">
              <ul class="navbar-nav">
                <!-- 搜索栏 -->
                <li class="nav-item mt-1 navbar-search text-left dropdown">
                  <a id="search" href="" data-toggle="dropdown" class="nav-link dropdown-toggle">
                    <i class="ft-search blue-grey darken-4"></i>
                  </a>
                  <div aria-labelledby="search" class="search dropdown-menu dropdown-menu-right">
                    <div class="arrow_box_right">
                      <form role="search" class="navbar-form navbar-right">
                        <div class="position-relative has-icon-right mb-0">
                          <input id="navbar-search" type="text" placeholder="输入基金编号、名字等" class="form-control"/>
                          <div class="form-control-position navbar-search-close"><i class="ft-x"></i></div>
                        </div>
                      </form>
                    </div>
                  </div>
                </li>
                <!-- 头像 -->
                <li class="dropdown nav-item mr-0">
                  <a id="dropdownBasic3" href="userindex.html" data-toggle="dropdown" class="nav-link position-relative dropdown-user-link dropdown-toggle">
                    <span class="avatar avatar-online">
                      <img id="navbar-avatar" src="app-assets/img/portrait/small/avatar.jpg" alt="avatar"/>
                    </span>
                  </a>
                  <div aria-labelledby="dropdownBasic3" class="dropdown-menu dropdown-menu-right">
                    <div class="arrow_box_right">
                      <a href="userindex.html" class="dropdown-item py-1">
                        <i class="ft-edit mr-2"></i><span>My Profile</span>
                      </a>
                      <a href="javascript:;" class="dropdown-item py-1">
                        <i class="ft-settings mr-2"></i>
                        <span>Settings</span>
                      </a>
                      <div class="dropdown-divider"></div>
                      <a href="javascript:;" class="dropdown-item">
                        <i class="ft-power mr-2"></i>
                        <span>Logout</span>
                      </a>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </nav>

      <div class="main-panel">
        <div class="main-content">
          <div class="content-wrapper">
            <div class="container-fluid"><!--Statistics cards Starts-->

<!-- 基础信息栏 -->
<div class="row">
	<div class="col-xl-4 col-lg-6 col-md-6 col-12">
		<div class="card bg-white">
			<div class="card-body">
				<div class="card-block pt-2 pb-0">
					<div class="media">
						<div class="media-body white text-left">
							<h4 class="font-medium-5 card-title mb-0">基本信息</h4>
							<span class="grey darken-1">
                  <div class="card-block" id='describe'>
                    <p></p>
                  </div>
              </span>
						</div>
						<div class="media-right text-right">
							<i class="icon-cup font-large-1 primary"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xl-4 col-lg-6 col-md-6 col-12">
		<div class="card bg-white">
			<div class="card-body">
				<div class="card-block pt-2 pb-0">
					<div class="media">
						<div class="media-body white text-left">
							<h4 class="font-medium-5 card-title mb-0">特色数据</h4>
              <span class="grey darken-1">
                <div class="card-block" id='calculate'>
                  <p></p>
                </div>
              </span>
						</div>
						<div class="media-right text-right">
							<i class="icon-wallet font-large-1 warning"></i>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-xl-4 col-lg-6 col-md-6 col-12">
		<div class="card bg-white">
			<div class="card-body">
				<div class="card-block pt-2 pb-0">
					<div class="media">
						<div class="media-body white text-left">
              <h4 class="font-medium-5 card-title mb-0">我的评价</h4>

              <div class="col-md-6" style="margin-top:22px">
                <div class="form-group" style="width:200px;height:35px">
                  <select id="projectinput5" name="buyed" class="form-control">
                    <option value="none" selected="" disabled="">是否购买过</option>
                    <option value="y">是</option>
                    <option value="n">否</option>
                  </select>
                </div>
                <div class="form-group" style="width:200px;height:35px">
                  <select id="projectinput5" name="will_buy" class="form-control">
                    <option value="none" selected="" disabled="">未来是否购买</option>
                    <option value="y">是</option>
                    <option value="n">否</option>
                  </select>
                </div>
                <div class="form-group" style="width:200px;height:35px">
                  <select id="projectinput5" name="will_recommend" class="form-control">
                    <option value="none" selected="" disabled="">是否会推荐给他人</option>
                    <option value="y">是</option>
                    <option value="n">否</option>
                  </select>
                </div>
                  <div class="form-group" style="width:200px;height:35px">
                    <select id="projectinput5" name="score" class="form-control">
                      <option value="none" selected="" disabled="">综合评分</option>
                      <option value=1>1分</option>
                      <option value=2>2分</option>
                      <option value=3>3分</option>
                      <option value=4>4分</option>
                      <option value=d>5分</option>
                    </select>
                  </div>
                  <button type="button" class="btn btn-success">
                    <i class="icon-note"></i> 提交
                  </button>
              
              </div>
              
						</div>
						<div class="media-right text-right">
							<i class="icon-basket-loaded font-large-1 success"></i>
            </div>
            
            

					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<!--Statistics cards Ends-->

<!--Line with Area Chart 1 Starts-->
<div class="row match-height">
  <!-- echarts走向栏 -->
	<div class="col-xl-8 col-lg-12 col-12">
		<div class="card">
			<div class="card-header">
        		<div class="card-title-wrap bar-success">
					<h4 class="card-title" id="fund_name"></h4>
				</div>
			</div>
			<div class="card-body">
				<div class="card-block">
					<div id="main" style="width: 650px;height:500px;">						
					</div>
				</div>
			</div>
		</div>
  </div>
  
  <!-- 推荐栏 -->
  <div class="col-xl-4 col-lg-12 col-12">
    <div class="card">
      <div class="card-header">
        <div class="card-title-wrap bar-danger">
          <h4 class="card-title">可能你会感兴趣</h4>
        </div>
      </div>
      <div class="card-body">
        <div class="col-12 timeline-left" id="activity">
          <div class="timeline">
            <ul class="list-unstyled base-timeline activity-timeline" id='recom'>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--Line with Area Chart 1 Ends-->

            </div>
          </div>
        </div>

        <footer class="footer footer-static footer-light">
          <p class="clearfix text-muted text-center px-2">
            <span>Copyright  &copy; 2020 
              <a href="#" id="pixinventLink" target="_blank" class="text-bold-800 primary darken-2">KASEYMZHOU  
              </a>, All rights reserved. 
            </span>
          </p>
        </footer>

      </div>
    </div>
    <!-- ////////////////////////////////////////////////////////////////////////////-->

    
    <!-- BEGIN VENDOR JS-->
    <script src="app-assets/vendors/js/core/jquery-3.3.1.min.js"></script>
    <script src="app-assets/vendors/js/core/popper.min.js"></script>
    <script src="app-assets/vendors/js/core/bootstrap.min.js"></script>
    <script src="app-assets/vendors/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="app-assets/vendors/js/prism.min.js"></script>
    <script src="app-assets/vendors/js/jquery.matchHeight-min.js"></script>
    <script src="app-assets/vendors/js/screenfull.min.js"></script>
    <script src="app-assets/vendors/js/pace/pace.min.js"></script>
    <!-- BEGIN VENDOR JS-->
    <!-- BEGIN PAGE VENDOR JS-->
    <!-- <script src="app-assets/vendors/js/chartist.min.js"></script> -->
    <!-- END PAGE VENDOR JS-->
    <!-- BEGIN CONVEX JS-->
    <script src="app-assets/js/app-sidebar.js"></script>
    <script src="app-assets/js/notification-sidebar.js"></script>
    <!-- END CONVEX JS-->
    <!-- BEGIN PAGE LEVEL JS-->
    <script src="app-assets/js/dashboard-ecommerce.js"></script>
    <!-- END PAGE LEVEL JS-->



<script>
  (function ($) {
        $.getUrlParam = function (name) {
          var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
          var r = window.location.search.substr(1).match(reg);
          if (r != null) return r;
          return null;
        }

      var cfid = $.getUrlParam('fid')[2];

    $.ajax({
        url:'http://127.0.0.1:5000/funds/trend/'+cfid,
        type:'GET',
        dataType:'jsonp',
        // jsonp:'callback',
        // async:false,
        // jsonpCallback:"success_jsonpCallback",
        success:function(d){
            $('#fund_name').html(d.fund_name)
             // 基于准备好的dom，初始化echarts实例
            var myChart = echarts.init(document.getElementById('main'));
            // 指定图表的配置项和数据
            var upColor = '#ec0000';
            var upBorderColor = '#8A0000';
            var downColor = '#00da3c';
            var downBorderColor = '#008F28';
            option = {
                xAxis: {
                    type: 'category',
                    data: d.date
                },
                yAxis: {
                    type: 'value',
                  // boundaryGap: ['20%', '20%']
                    min: function (value) {
                      return value.min;
                    },
                    max: function (value) {
                      return value.max;
                    }
                },
                tooltip: {
                  trigger: 'axis'
                },
                series: [{
                    name: '单位净值',
                    data: d.unit_nav,
                    type: 'line',
                    smooth: true
                },
                {
                    name: '累计净值',
                    data: d.accum_nav,
                    type: 'line',
                    smooth: true
                },
                {
                    name: '复权单位净值',
                    data: d.adj_nav,
                    type: 'line',
                    smooth: true
                }],
                legend: {data: ['单位净值', '累计净值', '复权单位净值']},
                dataZoom: [
                        {
                            type: 'inside',
                            start: 50,
                            end: 100
                        },
                        {
                            show: true,
                            type: 'slider',
                            top: '90%',
                            start: 50,
                            end: 100
                        }
                    ],
                };
                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);             
              },
        error: function (e) {
          console.log("Error");
          console.log(e);
        }
    })

    $.ajax({
      url:'http://127.0.0.1:5000/funds/recommend/'+cfid,
      type:'GET',
      dataType:'jsonp',
      success:function(d){
        var data = d.list;
        rhtml = '';
        for (i=0;i<data.length;i++){
          rhtml += '<li class="">'
          rhtml +=  '<div class="act-time">'+data[i].management+'</div>'
          rhtml +=  '<div class="base-timeline-info">'
          rhtml +=  '<a href="funds-details.html?fid='+data[i].fid+'" class="text-uppercase text-danger">'+data[i].name+'</a>'
          rhtml +=  '</div>'
          rhtml +=  '<small class="text-muted">'+data[i].min+'</small>'
          rhtml +=  '</li>'
        };
        $('#recom').html(rhtml)
      },
      error:function (e) {
        console.log("Error");
        console.log(e);
      }
    })

    $.ajax({
      url:'http://127.0.0.1:5000/funds/describe/'+cfid,
      type:'GET',
      dataType:'jsonp',
      success:function(d){
        dhtml = '';
        dhtml += '<p>管理人：'+d.management+'</p>'
        dhtml += '<p>基金经理：'+d.manager+'</p>'
        dhtml += '<p>基金类别：'+d.class+'</p>'
        dhtml += '<p>风险类别：'+d.risk+'</p>'
        dhtml += '<p>成立日期：'+d.founded_date+'</p>'
        dhtml += '<p>排名：'+d.rank+'</p>'
        $('#describe').html(dhtml)
      },
      error:function (e) {
        console.log("Error");
        console.log(e);
      }
    })

    $.ajax({
      url:'http://127.0.0.1:5000/funds/cal/'+cfid,
      type:'GET',
      dataType:'jsonp',
      success:function(d){
        chtml = '';
        chtml += '<p>Alpha：'+d.alpha+'</p>'
        chtml += '<p>Beta：'+d.beta+'</p>'
        chtml += '<p>Sharpe：'+d.sharpe+'</p>'
        chtml += '<p>Treynor：'+d.Treynor+'</p>'
        chtml += '<p>Jeason：'+d.Jeason+'</p>'
        chtml += '<p>平均收益率：'+d.avg_return+'</p>'
        $('#calculate').html(chtml)
      },
      error:function (e) {
        console.log("Error");
        console.log(e);
      }
    })


  })(jQuery);

    </script>

  </body>
</html>